webpackJsonp([1],{138:function(e,t,a){var o,i;a(181),o=a(199);var s=a(217);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-6bb7f517",e.exports=o},139:function(e,t,a){var o,i;a(174),o=a(200);var s=a(212);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-5c6fcdab",e.exports=o},140:function(e,t,a){var o,i;a(188),o=a(201);var s=a(222);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-bee1d800",e.exports=o},141:function(e,t,a){var o,i;a(175),o=a(202);var s=a(213);i=o=o||{},"object"!=typeof o.default&&"function"!=typeof o.default||(i=o=o.default),"function"==typeof i&&(i=i.options),i.render=s.render,i.staticRenderFns=s.staticRenderFns,i._scopeId="data-v-6137c2d2",e.exports=o},151:function(e,t,a){t=e.exports=a(3)(),t.push([e.i,"",""])},152:function(e,t,a){t=e.exports=a(3)(),t.push([e.i,"",""])},158:function(e,t,a){t=e.exports=a(3)(),t.push([e.i,".role-edit .footer[data-v-6bb7f517]{margin:10px 0}.role-edit .info-name[data-v-6bb7f517]{width:220px;margin:20px 0}.role-edit .item[data-v-6bb7f517]{float:left;margin:25px}",""])},165:function(e,t,a){t=e.exports=a(3)(),t.push([e.i,".user .info[data-v-bee1d800]{color:#20a0ff}",""])},174:function(e,t,a){var o=a(151);"string"==typeof o&&(o=[[e.i,o,""]]);a(4)(o,{});o.locals&&(e.exports=o.locals)},175:function(e,t,a){var o=a(152);"string"==typeof o&&(o=[[e.i,o,""]]);a(4)(o,{});o.locals&&(e.exports=o.locals)},181:function(e,t,a){var o=a(158);"string"==typeof o&&(o=[[e.i,o,""]]);a(4)(o,{});o.locals&&(e.exports=o.locals)},188:function(e,t,a){var o=a(165);"string"==typeof o&&(o=[[e.i,o,""]]);a(4)(o,{});o.locals&&(e.exports=o.locals)},199:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(6);t.default={name:"role-edit",created:function(){this.getInfo()},data:function(){return{roleName:"",permissionGroup:[]}},methods:{getInfo:function(){var e=this,t=e.$route.query.id;if(!t&&0!=t)return void e.$message.warning("参数错误");e.$store.getters.Fetch.ajax(e.Config.action.role.view,{id:t},function(a){e.roleName=0==t?"":a.role.name,e.permissionGroup=a.permission},function(t){e.$message.warning(t.responseMsg)})},changeSub:function(e,t){var a=!0,o=!1,i=void 0;try{for(var s,n=e[Symbol.iterator]();!(a=(s=n.next()).done);a=!0){s.value.selected=t}}catch(e){o=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw i}}},commitEdit:function(){var e=this,t=[],a=!0,o=!1,i=void 0;try{for(var s,n=e.permissionGroup[Symbol.iterator]();!(a=(s=n.next()).done);a=!0){var r=s.value;if(r.selected){t.push(r.id);var l=!0,d=!1,c=void 0;try{for(var u,p=r.sub[Symbol.iterator]();!(l=(u=p.next()).done);l=!0){var f=u.value;f.selected&&t.push(f.id)}}catch(e){d=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(d)throw c}}}}}catch(e){o=!0,i=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw i}}return e.$store.getters.Fetch.ajax(e.Config.action.role.modify,{ids:t},function(e){})}},watch:{},computed:a.i(o.b)({Config:function(e){return e.Config}}),components:{}}},200:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(6);t.default={name:"role-list",created:function(){this.getList()},data:function(){return{statusMap:{},pickerOption:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},option:{page:1,pageSize:20,keyword:"",total:0},statusClassMap:{},roleList:[{id:1,name:"管理员"}]}},methods:{search:function(){1==this.option.page?this.getList():this.option.page=1},getList:function(e){this.option.page=e||1},addRole:function(){this.$router.push({name:"SupportUserRoleEdit",query:{id:0}})},editRow:function(e,t){this.$router.push({name:"SupportUserRoleEdit",query:{id:t[e].id}})},freezeRow:function(e,t){var a=this;a.$store.getters.Fetch.ajax(a.Config.action.inside.freeze,{id:t[e].id},function(e){a.search(),a.$message.success("操作成功")},function(e){a.$message.warning(e.responseMsg)})}},computed:a.i(o.b)({Config:function(e){return e.Config}}),components:{}}},201:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(6);t.default={name:"user",created:function(){this.getList()},data:function(){var e=this;return{showAdd:!1,showEdit:!1,option:{page:1,pageSize:20,keyword:"",total:0},addOption:{username:"",name:"",sex:"M",email:"",password:"",rePassword:""},editOption:{id:"",name:"",password:"",rePassword:""},userList:[],rules:{username:[{required:!0,message:"请输入用户昵称",trigger:"blur,change"}],password:[{required:!0,validator:function(t,a,o){""===a?o(new Error("请输入新密码")):(e.showAdd&&""!==e.addOption.rePassword&&e.addOption.rePassword!==a&&e.$refs.addform.validateField("rePassword"),e.showEdit&&""!==e.editOption.rePassword&&e.editOption.rePassword!==a&&e.$refs.editform.validateField("rePassword"),o())},trigger:"blur,change"}],rePassword:[{required:!0,validator:function(t,a,o){""===a?o(new Error("请再次输入密码")):e.showAdd&&a!==e.addOption.password||e.showEdit&&a!==e.editOption.password?o(new Error("两次输入密码不一致!")):o()},trigger:"blur,change"}],name:[{required:!0,message:"请输入姓名",trigger:"blur,change"}],sex:[{required:!0,message:"请选择性别",trigger:"blur,change"}],email:[{type:"email",message:"请填写正确的邮箱地址",trigger:"blur,change"}]}}},methods:{search:function(){1==this.option.page?this.getList():this.option.page=1},getList:function(e){this.option.page=e||1},showAddDialog:function(){var e=this;e.addOption.username="",e.addOption.name="",e.addOption.sex="M",e.addOption.email="",e.addOption.password="",e.showAdd=!0},addLine:function(){var e=this,t=!1;if(e.$refs.addform.validate(function(a){if(!a)return void e.$message.warning("请按提示添加用户");t=a}),t){var a={username:e.addOption.username,name:e.addOption.name,sex:e.addOption.sex,email:e.addOption.email,is_frozen:0};return e.userList.push(a),e.$store.getters.Fetch.ajax(e.Config.action.supportUser.add,e.addOption,function(t){e.showAdd=!1,e.search(),e.$message.success("用户添加成功！")},function(t){e.$message.warning(t.responseMsg)})}},editLine:function(){var e=this,t=!1;if(e.$refs.editform.validate(function(a){if(!a)return void e.$message.warning("请按提示重置密码");t=a}),t){var a={id:e.editOption.id,password:e.editOption.password};return e.$store.getters.Fetch.ajax(e.Config.action.supportUser.resetPw,a,function(t){e.showEdit=!1,e.$message.success("密码重置成功！")},function(t){e.$message.warning(t.responseMsg)})}},editRow:function(e,t){var a=this;a.editOption.index=e,a.editOption.id=t[e].id,a.editOption.name=t[e].name,a.editOption.password="",a.editOption.rePassword="",a.showEdit=!0},deleteRow:function(e,t){var a=this;a.$store.getters.Fetch.ajax(a.Config.action.user.delete,{id:t[e].id},function(e){a.search(),a.$message.success("操作成功")},function(e){a.$message.warning(e.responseMsg)})},freezeRow:function(e,t){var a=this;a.$store.getters.Fetch.ajax(a.Config.action.user.freeze,{id:t[e].id},function(e){a.search(),a.$message.success("操作成功")},function(e){a.$message.warning(e.responseMsg)})}},computed:a.i(o.b)({Config:function(e){return e.Config}}),components:{}}},202:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(6);t.default={name:"user-log",created:function(){this.getList()},data:function(){return{timeInterval:"",option:{id:"",page:1,pageSize:20,keyword:"",startTime:"",endTime:"",total:0},userLogList:[]}},methods:{search:function(){1==this.option.page?this.getList():this.option.page=1},getList:function(e){var t=this;0!=t.$route.params.id&&(t.option.id=t.$route.params.id),t.option.page=e||1},dateChange:function(){var e=this;e.timeInterval&&e.timeInterval[0]?(e.option.startTime=e.timeInterval[0].format("yyyy-MM-dd"),e.option.endTime=e.timeInterval[1].format("yyyy-MM-dd")):(e.option.startTime="",e.option.endTime=""),e.search()}},computed:a.i(o.b)({Config:function(e){return e.Config}}),components:{}}},212:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-list"},[a("el-breadcrumb",{staticClass:"com-title",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("系统用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色列表")])],1),e._v(" "),a("div",{staticClass:"table-body",attrs:{flex:"main:justify cross:center"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键字",icon:"search","on-icon-click":e.search},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.search(t)}},model:{value:e.option.keyword,callback:function(t){e.option.keyword=t},expression:"option.keyword"}}),e._v(" "),a("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.addRole()}}})],1),e._v(" "),a("el-table",{staticClass:"my-table",staticStyle:{width:"80%"},attrs:{data:e.roleList}},[a("el-table-column",{attrs:{prop:"name",label:"角色名称","min-width":"200"},scopedSlots:e._u([["default",function(t){return[a("span",[e._v(e._s(t.row.name))])]}]])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([["default",function(t){return[a("span",{class:e.statusClassMap[t.row.status]},[e._v(e._s(e.statusMap[t.row.status]))])]}]])}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:e._u([["default",function(t){return[a("el-button",{staticClass:"table-btn",attrs:{type:"info",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.editRow(t.$index,e.roleList)}}},[e._v("\n          编辑\n        ")]),e._v(" "),a("el-button",{staticClass:"table-btn",attrs:{type:"info",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.freezeRow(t.$index,e.roleList)}}},[e._v("\n          "+e._s("1"==t.row.is_frozen?"解冻":"冻结")+"\n        ")])]}]])})],1),e._v(" "),a("el-pagination",{staticClass:"pagi",attrs:{"current-page":e.option.page,"page-size":e.option.pageSize,layout:"prev, pager, next, jumper, total",total:e.option.total},on:{"current-change":e.getList}})],1)},staticRenderFns:[]}},213:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-log"},[a("el-breadcrumb",{staticClass:"com-title",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("系统用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户日志")])],1),e._v(" "),a("div",{staticClass:"table-body",attrs:{flex:"main:justify cross:center"}},[a("el-date-picker",{staticClass:"search-input",attrs:{type:"daterange","picker-options":e.pickerOption,placeholder:"查询操作时间"},model:{value:e.timeInterval,callback:function(t){e.timeInterval=t},expression:"timeInterval"}})],1),e._v(" "),a("el-table",{staticClass:"my-table",staticStyle:{width:"80%"},attrs:{data:e.userLogList}},[a("el-table-column",{attrs:{prop:"discription",label:"操作名称"}}),e._v(" "),a("el-table-column",{attrs:{prop:"action_time",label:"操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"操作者"}})],1),e._v(" "),a("el-pagination",{staticClass:"pagi",attrs:{"current-page":e.option.page,"page-size":e.option.pageSize,layout:"prev, pager, next, jumper, total",total:e.option.total},on:{"current-change":e.getList}})],1)},staticRenderFns:[]}},217:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-edit"},[a("el-breadcrumb",{staticClass:"com-title",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("系统用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("角色权限"+e._s(0==e.$route.query.id?"新建":"编辑"))])],1),e._v(" "),e.$route.query.id||0==e.$route.query.id?a("div",{staticClass:"table-body"},[a("div",{staticClass:"info-name"},[a("el-input",{attrs:{placeholder:"请输入角色名"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}},[a("template",{slot:"prepend"},[e._v("角色名")])],2)],1),e._v(" "),e._l(e.permissionGroup,function(t){return a("div",{staticClass:"module-line com-border"},[a("div",[a("el-checkbox",{on:{change:function(a){e.changeSub(t.sub,t.selected)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"module.selected"}},[e._v(e._s(t.name))])],1),e._v(" "),a("div",{staticClass:"item-line clearfix"},e._l(t.sub,function(t){return a("div",{staticClass:"item"},[a("el-checkbox",{model:{value:t.selected,callback:function(e){t.selected=e},expression:"item.selected"}},[e._v(e._s(t.name))])],1)}))])})],2):e._e(),e._v(" "),a("div",{staticClass:"footer center"},[a("c-button",{staticClass:"submit",attrs:{type:"info",clickFunc:[e.commitEdit]}},[e._v(e._s(0==e.$route.query.id?"新建角色":"提交修改"))])],1)],1)},staticRenderFns:[]}},222:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-breadcrumb",{staticClass:"com-title",attrs:{separator:"/"}},[a("el-breadcrumb-item",[e._v("系统用户管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("用户列表")])],1),e._v(" "),a("div",{staticClass:"table-body",attrs:{flex:"main:justify cross:center"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入关键字",icon:"search","on-icon-click":e.search},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.search(t)}},model:{value:e.option.keyword,callback:function(t){e.option.keyword=t},expression:"option.keyword"}}),e._v(" "),a("el-button",{staticClass:"add-btn",attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.showAddDialog()}}})],1),e._v(" "),a("el-table",{staticClass:"my-table",staticStyle:{width:"80%"},attrs:{data:e.userList}},[a("el-table-column",{attrs:{prop:"username",label:"用户昵称"},scopedSlots:e._u([["default",function(t){return[a("router-link",{staticClass:"info",attrs:{to:{name:"SupportUserLog",params:{id:t.row.id}}}},[e._v(e._s(t.row.username))])]}]])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:e._u([["default",function(t){return[a("span",{class:{frozen:"1"==t.row.is_frozen}},[e._v(e._s("1"==t.row.is_frozen?"冻结":"正常"))])]}]])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sex",label:"性别"},scopedSlots:e._u([["default",function(t){return[a("span",[e._v(e._s("M"==t.row.sex?"男":"女"))])]}]])}),e._v(" "),a("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"140"},scopedSlots:e._u([["default",function(t){return[a("el-button",{staticClass:"lookup table-btn",attrs:{type:"info",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.freezeRow(t.$index,e.userList)}}},[e._v("\n          "+e._s("1"==t.row.is_frozen?"解冻":"冻结")+"\n        ")]),e._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"240",trigger:"click"},model:{value:t.row.showDelete,callback:function(e){t.row.showDelete=e},expression:"scope.row.showDelete"}},[a("p",{staticStyle:{"text-align":"center"}},[e._v("确定删除“"+e._s(t.row.username)+"”吗？")]),e._v(" "),a("div",{staticClass:"clearfix",staticStyle:{"text-align":"right"}},[a("el-button",{attrs:{type:"default",size:"small"},on:{click:function(e){t.row.showDelete=!1}}},[e._v("取消\n            ")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){e.deleteRow(t.$index,e.userList)}}},[e._v("确定\n            ")])],1),e._v(" "),a("el-button",{staticClass:"lookup table-btn",attrs:{type:"info",size:"small"},slot:"reference"},[e._v("删除\n          ")])],1),e._v(" "),a("el-button",{staticClass:"table-btn",attrs:{type:"info",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.editRow(t.$index,e.userList)}}},[e._v("\n          重置密码\n        ")])]}]])})],1),e._v(" "),a("el-pagination",{staticClass:"pagi",attrs:{"current-page":e.option.page,"page-size":e.option.pageSize,layout:"prev, pager, next, jumper, total",total:e.option.total},on:{"current-change":e.getList}}),e._v(" "),a("el-dialog",{attrs:{title:"添加用户","close-on-click-modal":!1},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[a("el-form",{ref:"addform",staticClass:"my-form",attrs:{model:e.addOption,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户昵称","label-width":"120px",prop:"username"}},[a("el-input",{model:{value:e.addOption.username,callback:function(t){e.addOption.username=t},expression:"addOption.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":"120px",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.addOption.password,callback:function(t){e.addOption.password=t},expression:"addOption.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认密码","label-width":"120px",prop:"rePassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.addOption.rePassword,callback:function(t){e.addOption.rePassword=t},expression:"addOption.rePassword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":"120px",prop:"name"}},[a("el-input",{model:{value:e.addOption.name,callback:function(t){e.addOption.name=t},expression:"addOption.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":"120px",prop:"sex"}},[a("el-radio-group",{model:{value:e.addOption.sex,callback:function(t){e.addOption.sex=t},expression:"addOption.sex"}},[a("el-radio",{attrs:{label:"M"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"F"}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"邮箱","label-width":"120px",prop:"email"}},[a("el-input",{model:{value:e.addOption.email,callback:function(t){e.addOption.email=t},expression:"addOption.email"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.showAdd=!1}}},[e._v("取 消")]),e._v(" "),a("c-button",{attrs:{type:"primary",clickFunc:[e.addLine]}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"重置密码","close-on-click-modal":!1},model:{value:e.showEdit,callback:function(t){e.showEdit=t},expression:"showEdit"}},[a("el-form",{ref:"editform",staticClass:"my-form",attrs:{model:e.editOption,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名称","label-width":"120px"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editOption.name,callback:function(t){e.editOption.name=t},expression:"editOption.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"新密码","label-width":"120px",prop:"password"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editOption.password,callback:function(t){e.editOption.password=t},expression:"editOption.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"确认新密码","label-width":"120px",prop:"rePassword"}},[a("el-input",{attrs:{type:"password"},model:{value:e.editOption.rePassword,callback:function(t){e.editOption.rePassword=t},expression:"editOption.rePassword"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.showEdit=!1}}},[e._v("取 消")]),e._v(" "),a("c-button",{attrs:{type:"primary",clickFunc:[e.editLine]}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}}});